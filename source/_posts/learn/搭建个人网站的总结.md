---
title: 搭建个人网站的总结
tags:
  - 技术总结
  - 学习
  - 个人网站
categories:
  - GitHub
  - 个人网站
abbrlink: 98f8f3ad
date: 2020-05-29 21:31:10
---
> 接触个人网站后希望做好后续维护或备份进行全局个人博客搭建总结
>
> 参考搭建教程<https://www.yunyoujun.cn>

# 前言

看了不少教程，还是云游君搭建教程给我更多的启发。起初还是从hexo主题选择发现了hexo-theme-yun这一个令人眼前一亮的主题。

希望未来可以坚持写一些自己想写的东西，在这个博客上可以真正的放开心思写一些东西。

我并不擅长写作，所以刚开始会记录一些技术借鉴的内容，以帮助自己学习记录一些内容，以便日后浏览有所启发。

就此开始吧！

# 博客搭建步骤

> 博客搭建工具以 GitHub + Hexo为主

## Git 与 GitHub

### 安装 Git

什么是 Git？

> Git（读音为/gɪt/）是一个开源的分布式版本控制系统，可以有效、高速地处理从很小到非常大的项目版本管理。
>
> Git 是 [Linus Torvalds](https://baike.baidu.com/item/Linus Torvalds/9336769) 为了帮助管理 Linux 内核开发而开发的一个开放源码的版本控制软件。
>
> Git的功能特性：
>
> **从一般开发者的角度来看，git 有以下功能**
>
> 1、从服务器上克隆完整的Git仓库（包括代码和版本信息）到单机上
>
> 2、在自己的机器上根据不同的开发目的，创建分支，修改代码
>
> 3、在单机上自己创建的分支上提交代码
>
> 4、在单机上合并分支
>
> 5、把服务器上最新版的代码fetch下来，然后跟自己的主分支合并
>
> 6、生成补丁（patch），把补丁发送给主开发者
>
> 7、看主开发者的反馈，如果主开发者发现两个一般开发者之间有冲突（他们之间可以合作解决的冲突），就会要求他们先解决冲突，然后再由其中一个人提交。如果主开发者可以自己解决，或者没有冲突，就通过
>
> 8、一般开发者之间解决冲突的方法，开发者之间可以使用pull 命令解决冲突，解决完冲突之后再向主开发者提交补丁
>
> **从主开发者的角度（假设主开发者不用开发代码）看，git 有以下功能**
>
> 1、查看邮件或者通过其它方式查看一般开发者的提交状态
>
> 2、打上补丁，解决冲突（可以自己解决，也可以要求开发者之间解决以后再重新提交，如果是开源项目，还要决定哪些补丁有用，哪些不用）
>
> 3、向公共服务器提交结果，然后通知所有开发人员
>
> ​                                                                                                                                     ——取自[百度百科](https://baike.baidu.com/item/GIT/12647237?fr=aladdin)
>
> 

下载Git并安装

若下载速度慢可以试试[这儿](https://pc.qq.com/detail/13/detail_22693.html)

### 注册  GitHub

注册 GitHub 账号 (网站为全英文善用翻译软件)

> 注册时的英文用户名将自动成为登陆博客的前缀名
>
> 如：域名为"用户名.github.io"

注册成功后登陆 GitHub

> 使用GitHub的原因是其免费提供了GitHub Pages服务，利用这一服务可以部署自己的静态网站，后续也可以在购买域名和服务器后加以绑定即可

点击页面右上角的 `+` → `New repository` 来新建一个仓库，用于存放网站的源代码

![](https://i.loli.net/2020/05/29/MKAGk5SFuh4HDyE.png)

> 出现警告是因为已经创建了这个仓库

仓库的名字务必设置为 `用户名.github.io`，用户名用英文字母

> 这样命名的原因是 GitHub Pages 的命名规范，也是自己的专属域名。购置专属域名是需要它来提供内容 (类似重定向)

一切设置完毕后，点击 `Create repository`

## 安装Node.js

> Node.js是什么？点击[这里](https://baike.baidu.com/item/node.js/7567977)

[下载Node.js](https://nodejs.org/zh-cn/) 

建议下载**长期支持版**而不是**当前发布版**，这是为了避免以后出现的一些问题难以解决或无法解决

安装时全部选择默认下一步即可，直到安装完成

> Windows打开命令行CMD，输入命令 `node --version`，如果显示了版本号且与下载版本号一致，则表示 Node.js 已经成功完成安装
>
> 在 Node.js 安装成功时，也成功安装了 `npm` ，在进行部署时会用到！
>
> `npm` 是随着 Node.js 一起被安装的包管理工具，可以理解为 Node.js 自带的应用商店

国内网络 `npm` 有时会会很慢，可以**考虑切换为某宝镜像源**

`npm config set registry https://registry.npm.taobao.org`

> [npm 和 yarn 常用的包与命令](https://www.yuque.com/yunyoujun/notes/npm-and-yarn#nrm)

## 安装 Hexo

:+1: Hexo[官方文档](https://hexo.io/zh-cn/docs/index.html)一份

> 为什么使用 Hexo ？
>
> Hexo 是一个快速、简洁而强大的博客框架，基于 Node.js，同样托管于 GitHub 之上。生态中拥有众多插件主题。你可以基于它快速生成一些静态页面
> 你可以使用别人的各种主题与插件，也可以自己定制开发想要的功能

桌面空白处右键打开 `Git Bash Here` 进入终端窗口，在终端中输入以下命令

```sh
npm install hexo-cli -g
# 如果安装失败，可能是没有权限，可以尝试头部加上 sudo 重新执行
# sudo npm install hexo-cli -g
```

> `install` 表示安装
>
> `hexo-cli` 是 Hexo 的终端工具，可以帮助你生成一些模版文件，之后再用到
>
> `-g` 代表的是全局安装。也就是在任何地方都可以使用，否则会只能在安装的目录下使用

此时用 `cd` 命令在终端切换当前目录到打算存储网站代码的文件目录

> [ cd | DOS命令](https://baike.baidu.com/item/cd/3516393)

也可以先建好文件夹**(文件夹名和GitHub仓库名一致)**再在该文件夹右键点击 `Git Bash Here`

接下来输入 `hexo init 用户名.github.io`

如果先创建了文件夹则可输入 `hexo init` 效果一样

> `hexo` 正是因为我们之前安装了 `hexo-cli` 这一个包，所以我们可以在终端中使用 `hexo` 这一命令。
> `init` 初始化博客的模版文件。后面跟的是你要新建的文件夹，最好和你此前新建的仓库名一致。

```sh
# 进入你的博客文件夹
cd 用户名.github.io
# 默认安装所有 `package.json` 文件中提到的包
npm install
# 你也可以缩写成 hexo s
hexo server
```

`server` 代表开启本地的 Hexo 服务器，这时打开浏览器，在地址栏中输入 `localhost:4000` 就可以看到本地的网页预览了。

按 `Ctrl + C` 中断服务器的运行。

至此，基础的模版页面搭建完成

### 使用 Hexo 主题

Hexo 默认提供的是 [hexo-theme-landscape](https://github.com/hexojs/hexo-theme-landscape) 主题。

想要选择其他主题可以在 [Hexo 主题官网](https://hexo.io/themes/)上进行下载使用

#### 下载 Hexo 主题

在所创建的文件夹 (XXX.github.io) 右键打开终端界面，输入命令

`git clone https://github.com/YunYouJun/hexo-theme-yun themes/主题名称`

> 这里便使用到了我们此前安装的 Git，`git clone` 即代表克隆（也就是复制的作用,项目托管于 GitHub，链接便是主题所在的地址），`themes/主题名称` 放在你 Hexo 文件夹下的 `themes/主题名称` 文件夹里（没有该文件夹会自动新建）

#### 编辑 Hexo 配置

在通过 Hexo 初始化生成的文件目录下，存在一个 `_config.yml` 文件

> `yml` 是 [YAML](https://baike.baidu.com/item/YAML/1067697) 文件的后缀名，YAML 是 “YAML Ain’t a Markup Language”（YAML 不是一种标记语言） 的缩写，但它实际上还是一种标记语言。你可以将其理解为存储数据的一种文本格式，这也是其诞生的目的。 如果你听说过 JSON，那你就更能明白它是干什么的了。

这个文件是 Hexo 的配置文件，关于配置的内容和含义可查看[官方文档](https://hexo.io/zh-cn/docs/configuration)

在 `_config.yml` 中找到 `theme` 这个字段，将其后的 `landscape` 修改为 `新的主题名`

```
theme: 新的主题名
```

有些主题使用了某些渲染是 Hexo 非自带的 (自带的有ejs 与 stylus)，如该主题使用了 pug 和 stylus，则还需要输入以下命令安装渲染器

```
npm install hexo-render-pug hexo-renderer-stylus
```

这时再像此前那般使用 `hexo server` 重新启动服务器，你就可以看到一个不一样的主题风格的页面了

> 使用其他主题配置后无法正常显示的也可尝试安装渲染器

#### 自定义主题配置

使用下载的主题时，默认使用的是该主题的各种默认数值，但这并不一定是你想让他表现出来的样子，因此要对主题配置数值进行修改

主题文件放在 `themes/主题文件夹/_config.yml` 文件中

> 在修改配置文件时，最好不要直接修改这里的配置文件。因为如果主题原作者升级更新了该主题，那么又要重新再配置。
>
> 解决办法就是在博客根目录 (并非主题目录) 新建 `source/_data/主题名.yml` 。若 `source/_data` 目录不存在，则新建一个）
>
> 本主题将自定义配置与默认配置进行合并，因此你只需要在 `主题名.yml` 文件中自定义你需要的配置即可，其余仍将自动采用默认配置。即仅仅修改需要的配置，会自动覆盖原配置文件的内容

以本主题为例

譬如我们需要更换头像。在 `yun.yml` 中填写

```sh
avatar:
  url: /images/avatar.jpg # 你的头像图片地址
  rounded: true
  opacity: 1
```

> 可以在 `source` 文件夹下创建 `images` 文件夹，用来存储图片
>
> 或使用[SM.MS](https://sm.ms/)等图床工具网站上传图片，来获取在线链接

## 生成静态文件

至今我们的工作都是在本地进行，要上传至GiuHub，便轮到了 GitHub Pages 的出场，不过 GitHub Pages 只支持纯静态文件

因此我们需要使用以下命令先来生成站点的静态文件

```sh
# 如果进行多次生成，为了避免受错误缓存影响，最好使用 hexo clean 先清除一遍。
hexo generate
# 缩写为 hexo g
```

此时你的文件夹目录下会出现 `public` 这个文件夹，里面存放的就是你站点的静态文件。

## 与远程仓库建立关联

接下来我们将本地的仓库与此前在 GitHub 上建立的仓库建立关联

```sh
git init # 初始化 Git 仓库，只需要执行一次即可
```

在将其部署到 GitHub Pages 上之前，我们最好先建立一个分支

> 什么是分支？
> Git 提供了版本管理功能，其中还有一个分支功能，你现在可以简单地将其理解为平行世界

`用户名.github.io` 部署后，GitHub Pages 将默认使用你的 master 分支作为静态文件部署
所以最好新建一个 hexo 分支（命名无所谓）用来存储 Hexo 地源代码，master 分支则用来存储部署后的静态文件

终端输入 `git checkout -b hexo(名字)`

这时便成功建立了一个 hexo 分支。（此后的工作都将在 hexo 分支下进行）

你可以通过 `git branch -v` 来查看当前有哪些分支，使用 `git branch 分支名` 来切换到对应的分支。

具体可参考 [云游君的Git 学习笔记](https://www.yuque.com/yunyoujun/notes/git-learn-note)

## 部署

为了更方便的部署到 GitHub Pages，Hexo 提供了 `hexo-deployer-git` 插件。

老规矩，安装

终端输入 `npm install hexo-deployer-git`

在文件的根目录下的 `_config.yml` 作如下配置

```sh
deploy:
  type: git
  repo: 你此前新建的仓库的链接 
  # 比如：https://github.com/github用户名/用户名.github.io
  # 举例：https://github.com/cyzhangwenbo/cyzhangwenbo.github.io
  branch: master # 默认使用 master 分支
  message: Update Hexo Static Content # 你可以自定义此次部署更新的说明
```

保存，部署

> 第一次可能需要你输入GitHub用户名与密码。

终端输入 `hexo deploy` 或 `hexo d`

等待完成后，打开网址 `https://用户名.github.io` 即可在线看到网站了

> 使用 https，http 可能无法正常打开。HTTPS 是多了安全加密的 HTTP，Chrome 浏览器已经默认会显示 `http` 链接为不安全。
> 为了安全，建议开启强制 https 跳转。`项目地址页面 -> Settings -> Options -> GitHub Pages -> Enforce HTTPS`。（翻到下面）
> 此时，http 网址会自动重定向到 https

## 备份

我们当前只是将生成的静态文件部署到了云端。

为了以防万一，我们应该将网站的源代码文件也推送到 GitHub 仓库备份

```sh
# 与远程 Git 仓库建立连接，只此一次即可
git remote add origin https://github.com/你的用户名/用户名.github.io
```

接下来准备提交，这几句命令将是你以后每次备份所需要输入

```
# 添加到缓存区
git add -A
git commit -m "这次做了什么更改，简单描述下即可"
# 推送至远程仓库
git push
# 第一次提交，你可能需设置一下默认提交分支
# git push --set-upstream origin hexo（分支名字）
```

每次推送都要输入这三条命令，你可能觉得有些麻烦。
那么你可以编写 bash 脚本

譬如，在根目录下新建 `update.sh`

```shell
# 如果没有消息后缀，默认提交信息为 `:pencil: update content`
info=$1
if ["$info" = ""];
then info=":pencil: update content"
fi
git add -A
git commit -m "$info"
git push origin hexo
```

此后更新的话，只需要在终端执行 `sh update.sh` 即可

可参考官方文档[将 Hexo 部署到 GitHub Pages](https://hexo.io/zh-cn/docs/github-pages)

## 开始写作

### 文章

终端输入以下命令即可新建 `xxx.md` 文件

```sh
hexo new "My New Post"
```

> 文件是Markdown文件，具体语法参考[Markdown 语法](https://github.com/younghz/Markdown)
>
> [ 云游君的Markdown 样式](https://www.yunyoujun.cn/star-markdown-css/)

### 页面

你可以新建一些自己的自定义页面。

譬如直接在 Hexo 目录下的 `source` 文件夹下直接新建 HTML 进行编写。

也可以通过命令 `hexo new page xxx` 来新建页面。（当然还是 Markdown，不过也是可以在 Markdown 里写 HTML 的，也会被渲染出来。）

END